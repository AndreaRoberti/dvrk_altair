<?xml version="1.0" encoding="utf-8"?>

<Config Version="4">
  <!-- Definition of da Vinci left PSM -->
  <!-- This one is MODIFIED!!! -->
  <!-- Check the conversion functions and values after -->

  <Robot Name="Robot" NumOfActuator="8" NumOfJoint="8">
    <Actuator ActuatorID="0" BoardID="0" AxisID="0" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="0.65535" Offset="0"/>
            <BitsToFeedbackAmps Scale="1.52590219" Offset="0"/>
            <NmToAmps Scale="0.125"/>
            <MaxCurrent Value="0.8125"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-375.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-375.00" Offset="0"/>
            <BitsToDeltaT Scale="0.125" Offset="0"/>
            <CountsPerTurn Value="-500.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000085832" Offset="0"/>
            <VoltsToPosSI Scale="0.125" Offset="0"/>
        </AnalogIn>
    </Actuator>

    <Actuator ActuatorID="1" BoardID="0" AxisID="1" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="1.3107" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.7629510948" Offset="0"/>
            <NmToAmps Scale="0.25"/>
            <MaxCurrent Value="1.625"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-740.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-750.00" Offset="0"/>
            <BitsToDeltaT Scale="0.25" Offset="0"/>
            <CountsPerTurn Value="-1000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000171664" Offset="0"/>
            <VoltsToPosSI Scale="0.25" Offset="0"/>
        </AnalogIn>
    </Actuator>

    <Actuator ActuatorID="2" BoardID="0" AxisID="2" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="2.6214" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.3814755474" Offset="0"/>
            <NmToAmps Scale="0.5"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>
    <Actuator ActuatorID="3" BoardID="0" AxisID="3" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="5.2428" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.190737774" Offset="0"/>
            <NmToAmps Scale="1"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>
    <Actuator ActuatorID="4" BoardID="3" AxisID="0" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="10.4856" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.0953688869" Offset="0"/>
            <NmToAmps Scale="2"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>
    <Actuator ActuatorID="5" BoardID="3" AxisID="1" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="20.9712" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.0476844434" Offset="0"/>
            <NmToAmps Scale="4"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>
    <Actuator ActuatorID="6" BoardID="3" AxisID="2" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="41.9424" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.238422217" Offset="0"/>
            <NmToAmps Scale="8"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>
    <Actuator ActuatorID="7" BoardID="3" AxisID="3" Pos1="ENC" Pos2="POT">
        <Drive>
            <AmpsToBits Scale="83.8848" Offset="0"/>
            <BitsToFeedbackAmps Scale="0.0119211109" Offset="0"/>
            <NmToAmps Scale="16"/>
            <MaxCurrent Value="6.5"/>
        </Drive>
        <Encoder>
            <BitsToPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaPosSI Scale="-3000.00" Offset="0"/>
            <BitsToDeltaT Scale="1" Offset="0"/>
            <CountsPerTurn Value="-4000.00"/>
        </Encoder>
        <AnalogIn>
            <BitsToVolts Scale="0.0000686656" Offset="0"/>
            <VoltsToPosSI Scale="1" Offset="0"/>
        </AnalogIn>
    </Actuator>

<!-- Coupling matices for Actuator->Joint Transformation, Joint->Actuator Transformation    -->
<!-- ActuatorTorque->JointTorque Transformation, and JointTorque->ActuatorTorque Transformation   -->

<!-- This coupling information is based on the informaiton provided on the following document -->
<!-- User Guide: The da Vincni Research Kit by Intuitive Surgical, Inc. Revision: Unknown -->
<!-- The following coupling information is for the Master Tool Manipulaor only -->

<!-- NoTE: Actuator->Joint matrix is not the inverse of Joint->Actuator -->
<!-- Gear ratio from Axis1 to Axis7 -->
<!-- nt1:63.41, nt2:49.88 nt3:59.71 nt4:10.53 nt5:33.16 nt6:33.16 nt7:16.58 -->
<!-- Radius of ilder on joint3(r43): 0.5515in, radius of idler on joint4(r44): 0.8235in -->

<!-- q1=qm1/nt1, q2=qm2/nt2, q3=qm3/nt3-qm2/nt2, q4=qm4/nt4 - (r43/r44)*(qm3/nt3 - qm2/nt2)
      q5=qm5/nt5, q6=qm6/nt6, q7=qm7/nt7 -->
    <Coupling Value="1">
        <ActuatorToJointPosition>
            <Row Val="0.0158 0.000 0.000 0.000 0.000 0.000 0.000 0.000"/>
            <Row Val="0.000 0.0200 0.000 0.000 0.000 0.000 0.000 0.000"/>
            <Row Val="0.000 -0.020 0.0167 0.000 0.000 0.000 0.000 0.000"/>
            <Row Val="0.000 0.0134 -0.0112 0.0950 0.000 0.000 0.000 0.000"/>
            <Row Val="0.000 0.000 0.000 0.000 0.0302 0.000 0.000 0.000"/>
            <Row Val="0.000 0.000 0.000 0.000 0.000 0.0302 0.000 0.000"/>
            <Row Val="0.000 0.000 0.000 0.000 0.000 0.000 0.0603 0.000"/>
            <Row Val="0.000 0.000 0.000 0.000 0.000 0.000 0.000 1.000"/>
        </ActuatorToJointPosition>
    </Coupling>
  </Robot>

  <!-- It would be nice to be able to include other XML files -->
  <!-- <Include FileName="MTM-Left.xml" /> -->

  <DigitalIn Name="BIT0" BoardID="0" BitID="0" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT1" BoardID="0" BitID="1" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT2" BoardID="0" BitID="2" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT3" BoardID="0" BitID="3" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT4" BoardID="0" BitID="4" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT5" BoardID="0" BitID="5" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT6" BoardID="0" BitID="6" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT7" BoardID="0" BitID="7" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT8" BoardID="0" BitID="8" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT9" BoardID="0" BitID="9" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT10" BoardID="0" BitID="10" Pressed="0" Trigger="none" />
  <DigitalIn Name="BIT11" BoardID="0" BitID="11" Pressed="0" Trigger="none" />

</Config>
